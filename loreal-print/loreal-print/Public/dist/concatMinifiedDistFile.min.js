!function(){"use strict";var e=angular.module("print.module",["ui.router","toaster"]);e.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,a){t.otherwise("/print"),e.state("print",{url:"/print",templateUrl:"Public/scripts/sharedViews/printNavbar.html"}).state("books",{url:"/print/books",templateUrl:"Public/scripts/books/books.view.html",controller:"booksCtrl",controllerAs:"vm"}).state("email",{url:"/print/email",templateUrl:"Public/scripts/email/email.view.html",controller:"emailCtrl",controllerAs:"vm"}).state("pdf",{url:"/print/pdf",templateUrl:"Public/scripts/signSubmit/signSubmit.view.html",controller:"signsubmitCtrl",controllerAs:"vm"}).state("print.circulation",{url:"/circulation",controller:"circulationCtrl",templateUrl:"Public/scripts/circulation/circulation.view.html",controllerAs:"vm"}).state("print.ratesReport",{url:"/ratesreport",controller:"ratesReportCtrl",templateUrl:"Public/scripts/ratesReport/ratesReport.view.html",controllerAs:"vm"}).state("print.editorialCalendar",{url:"/editorialcalendar",controller:"editorialCalendarCtrl",templateUrl:"Public/scripts/editorialCalendar/editorialCalendar.view.html",controllerAs:"vm"}).state("print.rates",{url:"/rates",controller:"ratesCtrl",controllerAs:"vm",templateUrl:"Public/scripts/rates/views/rates.main.html"}).state("print.terms",{url:"/termsconditions",templateUrl:"Public/scripts/terms/terms.view.html",controller:"termsCtrl",controllerAs:"vm"}).state("print.tablet",{url:"/tablet",templateUrl:"Public/scripts/tablet/tablet.view.html",controller:"tabletCtrl",controllerAs:"vm"}).state("print.signSubmit",{url:"/signsubmit",templateUrl:"Public/scripts/signSubmit/signSubmit.view.html",controller:"signsubmitCtrl",controllerAs:"vm"}),a.html5Mode(!0)}])}(),function(){"use strict";angular.module("print.module").controller("emailCtrl",["$http","$scope","$rootScope","$state",function(e,t,a,n){function r(e){s.uiState.isValid=!1;var t={property:"Error",message:""};switch(s.uiState.messages=[],e.status){case 400:var a=e.data.ModelState;for(var n in a){for(var r=0;r<a[n].length;r++)i(n,a[n][r]);console.log("handleException errors case 400: ",a)}break;case 404:t.message="The product you were requesting could not be found",s.uiState.messages.push(t);break;case 500:t.message=e.data.ExceptionMessage,s.uiState.messages.push(t);break;default:t.message="Status: "+e.status+" - Error Message: "+e.statusText,s.uiState.messages.push(t)}}function i(e,t){s.uiState.messages.push({property:e,message:t})}var s=this,o=e;s.$scope=t,s.email={EmailTo:"",EmailSubject:"",EmailBody:""},s.sendEmail=function(){s.emailForm.$valid&&(console.log("Email to be sent: ",s.email),o.post("api/Utilities/SendEmail/email",s.email).then(function(e){console.log("Email sent",e)},function(e){alert("There was a problem in the return from the email call: "+e),r(e)}))}}])}(),function(){"use strict";angular.module("print.module").controller("ratesCtrl",["$http","$scope","$rootScope","toaster","modalService","ratesService",function(e,t,a,n,r,i){var s=this;s.getRatesData=function(){s.showRatesTab=!1,i.getRatesDataService().then(function(e){s.ratesData=e.data,s.showRatesTab=!0,s.parentP4C=s.ratesData.RateParentAdTypes[0],s.adTypeP4CnonBleed=s.ratesData.RateParentAdTypes[0].RateRateTypes[0].RateAdTypes[1],s.adTypeP4CB=s.ratesData.RateParentAdTypes[0].RateRateTypes[0].RateAdTypes[2],s.openBleedFormula=function(){null===s.adTypeP4CB.RateTiers[0].RateEditionTypes[0].Rate||null===s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].Rate||0===s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].Rate?s.parentP4C.BleedOpenPercentPremium=null:s.adTypeP4CB.RateTiers[0].RateEditionTypes[0].Rate>=0&&s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].Rate>0&&(s.parentP4C.BleedOpenPercentPremium=((s.adTypeP4CB.RateTiers[0].RateEditionTypes[0].Rate-s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].Rate)/s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].Rate*100).toFixed(2))},s.earnedNetP4CBcpm=function(){for(var e=1;e<s.adTypeP4CnonBleed.RateTiers.length;e++)null===s.adTypeP4CB.RateTiers[e].RateEditionTypes[0].Rate||null===s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee||0===s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee?s.adTypeP4CB.RateTiers[e].RateEditionTypes[0].CPM=null:s.adTypeP4CB.RateTiers[e].RateEditionTypes[0].Rate>=0&&s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee>0&&(s.adTypeP4CB.RateTiers[e].RateEditionTypes[0].CPM=(s.adTypeP4CB.RateTiers[e].RateEditionTypes[0].Rate/s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee).toFixed(2))},s.earnedNetP4Cformula=function(){for(var e=1;e<s.adTypeP4CnonBleed.RateTiers.length;e++)null===s.adTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].Rate||null===s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee||0===s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee?s.adTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].CPM=null:s.adTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].Rate>=0&&s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee>0&&(s.adTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].CPM=(s.adTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].Rate/s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee).toFixed(2))},s.earnedNetP4CBrate=function(){for(var e=1;e<s.adTypeP4CnonBleed.RateTiers.length;e++)null===s.adTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].Rate||null===s.parentP4C.BleedEarnedPercentPremium?s.adTypeP4CB.RateTiers[e].RateEditionTypes[0].Rate=null:s.adTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].Rate>=0&&s.parentP4C.BleedEarnedPercentPremium>=0&&(s.adTypeP4CB.RateTiers[e].RateEditionTypes[0].Rate=(s.adTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].Rate*(1+s.parentP4C.BleedEarnedPercentPremium/100)).toFixed(2))},void 0!==s.ratesData.RateParentAdTypes[0].RateRateTypes[1]&&(s.retailAdTypeP4CB=s.ratesData.RateParentAdTypes[0].RateRateTypes[1].RateAdTypes[2],s.retailAdTypeP4CnonBleed=s.ratesData.RateParentAdTypes[0].RateRateTypes[1].RateAdTypes[1],s.retailEarnedNetP4CBrate=function(){for(var e=1;e<s.retailAdTypeP4CnonBleed.RateTiers.length;e++)null===s.retailAdTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].Rate||null===s.parentP4C.BleedEarnedPercentPremium?s.retailAdTypeP4CB.RateTiers[e].RateEditionTypes[0].Rate=null:s.retailAdTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].Rate>=0&&s.parentP4C.BleedEarnedPercentPremium>=0&&(s.retailAdTypeP4CB.RateTiers[e].RateEditionTypes[0].Rate=(s.retailAdTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].Rate*(1+s.parentP4C.BleedEarnedPercentPremium/100)).toFixed(2))},s.retailEarnedNetP4Cformula=function(){for(var e=1;e<s.retailAdTypeP4CnonBleed.RateTiers.length;e++)null===s.retailAdTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].Rate||null===s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee||0===s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee?s.retailAdTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].CPM=null:s.retailAdTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].Rate>=0&&s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee>0&&(s.retailAdTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].CPM=(s.retailAdTypeP4CnonBleed.RateTiers[e].RateEditionTypes[0].Rate/s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee).toFixed(2))},s.retailEarnedNetP4CBcpm=function(){for(var e=1;e<s.retailAdTypeP4CnonBleed.RateTiers.length;e++)null===s.retailAdTypeP4CB.RateTiers[e].RateEditionTypes[0].Rate||null===s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee||0===s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee?s.retailAdTypeP4CB.RateTiers[e].RateEditionTypes[0].CPM=null:s.retailAdTypeP4CB.RateTiers[e].RateEditionTypes[0].Rate>=0&&s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee>0&&(s.retailAdTypeP4CB.RateTiers[e].RateEditionTypes[0].CPM=(s.retailAdTypeP4CB.RateTiers[e].RateEditionTypes[0].Rate/s.adTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].RateBaseCirculationGuarantee).toFixed(2))},s.retailOpenNetP4CBrate=function(){s.ratesData.RateParentAdTypes[0].RateRateTypes[1]&&(null===s.retailAdTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].Rate||null===s.parentP4C.BleedOpenPercentPremium?s.retailAdTypeP4CB.RateTiers[0].RateEditionTypes[0].Rate=null:s.retailAdTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].Rate>=0&&s.parentP4C.BleedOpenPercentPremium>=0&&(s.retailAdTypeP4CB.RateTiers[0].RateEditionTypes[0].Rate=(s.retailAdTypeP4CnonBleed.RateTiers[0].RateEditionTypes[0].Rate*(1+s.parentP4C.BleedOpenPercentPremium/100)).toFixed(2)))}),s.parentScentStrip=s.ratesData.RateParentAdTypes[3],s.openScentStrip=s.ratesData.RateParentAdTypes[3].RateRateTypes[0].RateAdTypes[0].RateTiers[0],s.fullRunEarnedCPM=function(){for(var e=0;e<s.parentScentStrip.RateRateTypes[0].RateAdTypes.length;e++)for(var t=0;t<s.parentScentStrip.RateRateTypes[0].RateAdTypes[0].RateTiers.length;t++)null===s.parentScentStrip.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[0].Rate||null===s.openScentStrip.RateEditionTypes[0].RateBaseCirculationGuarantee||0===s.openScentStrip.RateEditionTypes[0].RateBaseCirculationGuarantee?s.parentScentStrip.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[0].CPM=null:s.parentScentStrip.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[0].Rate>=0&&s.openScentStrip.RateEditionTypes[0].RateBaseCirculationGuarantee>0&&(s.parentScentStrip.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[0].CPM=(s.parentScentStrip.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[0].Rate/s.openScentStrip.RateEditionTypes[0].RateBaseCirculationGuarantee).toFixed(2))},s.subscriptionEarnedCPM=function(){for(var e=0;e<s.parentScentStrip.RateRateTypes[0].RateAdTypes.length;e++)for(var t=0;t<s.parentScentStrip.RateRateTypes[0].RateAdTypes[0].RateTiers.length;t++)null===s.parentScentStrip.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[1].Rate||null===s.openScentStrip.RateEditionTypes[1].RateBaseCirculationGuarantee||0===s.openScentStrip.RateEditionTypes[1].RateBaseCirculationGuarantee?s.parentScentStrip.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[1].CPM=null:s.parentScentStrip.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[1].Rate>=0&&s.openScentStrip.RateEditionTypes[1].RateBaseCirculationGuarantee>0&&(s.parentScentStrip.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[1].CPM=(s.parentScentStrip.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[1].Rate/s.openScentStrip.RateEditionTypes[1].RateBaseCirculationGuarantee).toFixed(2))},s.parentInsert=s.ratesData.RateParentAdTypes[1],s.openInsert=s.ratesData.RateParentAdTypes[1].RateRateTypes[0].RateAdTypes[0].RateTiers[0],s.insertsFullRunEarnedCPM=function(){for(var e=0;e<s.parentInsert.RateRateTypes[0].RateAdTypes.length;e++)for(var t=0;t<s.parentInsert.RateRateTypes[0].RateAdTypes[0].RateTiers.length;t++)null===s.parentInsert.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[0].Rate||null===s.openScentStrip.RateEditionTypes[0].RateBaseCirculationGuarantee||0===s.openScentStrip.RateEditionTypes[0].RateBaseCirculationGuarantee?s.parentInsert.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[0].CPM=null:s.parentInsert.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[0].Rate>=0&&s.openScentStrip.RateEditionTypes[0].RateBaseCirculationGuarantee>0&&(s.parentInsert.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[0].CPM=(s.parentInsert.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[0].Rate/s.openScentStrip.RateEditionTypes[0].RateBaseCirculationGuarantee).toFixed(2))},s.insertsSubscriptionEarnedCPM=function(){for(var e=0;e<s.parentInsert.RateRateTypes[0].RateAdTypes.length;e++)for(var t=0;t<s.parentInsert.RateRateTypes[0].RateAdTypes[0].RateTiers.length;t++)null===s.parentInsert.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[1].Rate||null===s.openScentStrip.RateEditionTypes[1].RateBaseCirculationGuarantee||0===s.openScentStrip.RateEditionTypes[1].RateBaseCirculationGuarantee?s.parentInsert.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[1].CPM=null:s.parentInsert.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[1].Rate>=0&&s.openScentStrip.RateEditionTypes[1].RateBaseCirculationGuarantee>0&&(s.parentInsert.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[1].CPM=(s.parentInsert.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[1].Rate/s.openScentStrip.RateEditionTypes[1].RateBaseCirculationGuarantee).toFixed(2))},s.parentBrcCards=s.ratesData.RateParentAdTypes[2],s.openBrcCards=s.ratesData.RateParentAdTypes[2].RateRateTypes[0].RateAdTypes[0].RateTiers[0],s.brcCardsFullRunEarnedCPM=function(){for(var e=0;e<s.parentBrcCards.RateRateTypes[0].RateAdTypes.length;e++)for(var t=0;t<s.parentBrcCards.RateRateTypes[0].RateAdTypes[0].RateTiers.length;t++)null===s.parentBrcCards.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[0].Rate||null===s.openScentStrip.RateEditionTypes[0].RateBaseCirculationGuarantee||0===s.openScentStrip.RateEditionTypes[0].RateBaseCirculationGuarantee?s.parentBrcCards.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[0].CPM=null:s.parentBrcCards.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[0].Rate>=0&&s.openScentStrip.RateEditionTypes[0].RateBaseCirculationGuarantee>0&&(s.parentBrcCards.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[0].CPM=(s.parentBrcCards.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[0].Rate/s.openScentStrip.RateEditionTypes[0].RateBaseCirculationGuarantee).toFixed(2))},s.brcCardsSubscriptionEarnedCPM=function(){for(var e=0;e<s.parentBrcCards.RateRateTypes[0].RateAdTypes.length;e++)for(var t=0;t<s.parentBrcCards.RateRateTypes[0].RateAdTypes[0].RateTiers.length;t++)null===s.parentBrcCards.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[1].Rate||null===s.openScentStrip.RateEditionTypes[1].RateBaseCirculationGuarantee||0===s.openScentStrip.RateEditionTypes[1].RateBaseCirculationGuarantee?(console.log("Hitting null or zero",s.openScentStrip.RateEditionTypes[1].RateBaseCirculationGuarantee),s.parentBrcCards.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[1].CPM=null):s.parentBrcCards.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[1].Rate>=0&&s.openScentStrip.RateEditionTypes[1].RateBaseCirculationGuarantee>0&&(console.log("hitting > 0 ",s.openScentStrip.RateEditionTypes[1].RateBaseCirculationGuarantee),s.parentBrcCards.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[1].CPM=(s.parentBrcCards.RateRateTypes[0].RateAdTypes[e].RateTiers[t].RateEditionTypes[1].Rate/s.openScentStrip.RateEditionTypes[1].RateBaseCirculationGuarantee).toFixed(2))}},function(e){console.log("GET Method not working"),s.loadHide=!0})},s.getRatesData(),s.saveRates=function(){console.log("stuff to be submitted",s.ratesData),s.isTimingOut=!0,i.saveRatesDataService(s.ratesData).then(function(e){console.log("pass"),r.saveSuccessModal(),s.isTimingOut=!1},function(e){r.saveErrorModal(e.data.Message),console.log("Error",e),s.isTimingOut=!1})}}])}(),function(){"use strict";angular.module("print.module").service("ratesService",["$http",function(e){var t=this;t.getRatesDataService=function(){return e.get("api/Rates/GetRates")},t.saveRatesDataService=function(t){return e.post("/api/Rates/saveRates/RatesModel",t)},t.openBleedFormula=function(e,t,a){e&&t&&(a=((e-t)/t*100).toFixed(2))}}])}(),function(){"use strict";angular.module("print.module").controller("signsubmitCtrl",["$http","$scope","$rootScope","$state","$sce","$window","modalService",function(e,t,a,n,r,i,s){var o=this,l=e;o.$scope=t,o.validateInputs=function(){l.get("api/PDFOutput/ValidateAllInputs").then(function(e){o.validationArray=e.data[0].split(";"),o.validationArray=o.validationArray.filter(function(e){return""!==e}),console.log("valid output result",o.validationArray)},function(e){console.log(e),s.saveErrorModal()})},o.validateInputs(),o.printPDF=function(){s.loadingModal(),o.loadHide=!1,l.get("api/PDFOutput/PrintPDFOutput",{responseType:"arraybuffer"}).success(function(e){t.info="Read'"+t.URL+"' with "+e.byteLength+" bytes in a variable of type '"+typeof e+"'";var a=new Blob([e],{type:"application/pdf"}),n=URL.createObjectURL(a);i.open(n,"_blank"),s.pdfSuccessModal(),o.loadHide=!0}).error(function(e,a){o.loadHide=!0,s.saveErrorModal(e),t.info="Request failed with status: "+a})}}])}(),function(){"use strict";angular.module("print.module").controller("editorialCalendarCtrl",["$http","$scope","modalService","editCalService",function(e,t,a,n){var r=this;r.answers=[],r.calendarRecords=[],r.getCalendarOutput=function(){n.getCalData().then(function(e){r.records=e.data},function(e){console.log("GET Method not working")})},r.getCalendarOutput(),r.cofirmDelete=function(e){a.confirmDeleteModal(),r.recordDelete=e},r.completeDelete=function(e){n.deleteCalData(e).then(function(e){r.getCalendarOutput(),a.successDeleteModal()},function(e){a.saveErrorModal(e)})},r.rowTouched=function(e){return r.Test=e},r.saveEditorialCalendar=function(t,n){try{r.newCal.$valid===!0||n===!0?(console.log("VALID",r.newCal.$valid),e.post("api/EditorialCalendar/saveEditorialCalendar/calendarRecord",t).then(function(e){a.changesSaved(),r.calendarRecord="",r.getCalendarOutput(),r.newCal.$setPristine(),r.newCal.$setUntouched(),r.rowTouched=[],console.log("PASS")}),function(e){a.saveErrorModal(e),console.log("POST FAIL")}):(a.incorrectSubmitModal(),console.log("Incorrect"))}catch(e){a.saveErrorModal(error),console.log("POST FAIL")}}}])}(),function(){"use strict";angular.module("print.module").service("editCalService",["$http",function(e){var t=this;t.getCalData=function(){return e.get("api/EditorialCalendar/GetCalendar")},t.deleteCalData=function(t){return e.delete("api/EditorialCalendar/"+t)},t.saveCalData=function(t){return e.post("api/EditorialCalendar/saveEditorialCalendar/calendarRecord",t)}}])}(),function(){"use strict";angular.module("print.module").controller("tabletCtrl",["$http","$scope","$rootScope","modalService",function(e,t,a,n){function r(){s.get("api/Tablet/GetTabletRates").then(function(e){i.records=e.data,console.log("Tablet Rates output: ",i.records),console.log("length",Object.keys(i.records).length)},function(e){handleException(e)})}var i=this,s=e;r(),i.tabletChanges=[],i.getTabletAnswers=function(e){for(var t=0;t<i.tabletChanges.length;t++)e.TabletFunctionalityID===i.tabletChanges[t].TabletFunctionalityID&&i.tabletChanges.splice(t,1);i.tabletChanges.push({TabletFunctionalityID:e.TabletFunctionalityID,EarnedRate:e.EarnedRate,OpenRate:e.OpenRate}),console.log("array",i.tabletChanges)},i.saveTabletAnswers=function(){i.isTimingOut=!0,s.post("api/Circulation/saveTabletRates/rates",i.tabletChanges).then(function(e){console.log("pass",e),n.saveSuccessModal(),i.tabletRateRecords=[],i.isTimingOut=!1},function(e){console.log("post fail"),n.saveErrorModal(e.data.Message),console.log(e),i.isTimingOut=!1})}}])}(),function(){"use strict";angular.module("print.module").controller("circulationCtrl",["$http","modalService","circService",function(e,t,a){var n=this;n.getCirculationOutput=function(){a.getCircData().then(function(e){n.circ=e.data},function(e){handleException(e)})},n.getCirculationOutput(),n.circChanges=[],n.getCircAnswers=function(e){for(var t=0;t<n.circChanges.length;t++)e.CirculationSubTypeID===n.circChanges[t].CirculationSubTypeID&&n.circChanges.splice(t,1);n.circChanges.push({CirculationSubTypeID:e.CirculationSubTypeID,PrintCirculation:e.PrintCirculation,DigitalReplicaCirculation:e.DigitalReplicaCirculation,DigitalNonReplicaCirculation:e.DigitalNonReplicaCirculation})},n.saveCircAnswers=function(){return 0===Object.keys(n.circChanges).length?(n.isTimingOut=!1,t.noNewAnswersModal()):(n.isTimingOut=!0,void a.saveCircData(n.circChanges).then(function(e){console.log("pass",e),t.saveSuccessModal(),n.circChanges=[],n.isTimingOut=!1},function(e){console.log("post fail"),t.saveErrorModal(e.data.Message),n.isTimingOut=!1}))}}])}(),function(){"use strict";angular.module("print.module").service("circService",["$http",function(e){var t=this;t.getCircData=function(){return e.get("api/circulation/GetCirculation")},t.saveCircData=function(t){return e.post("api/Circulation/saveCirculationRecords/CircContent",t)}}])}(),function(){"use strict";angular.module("print.module").controller("booksCtrl",["$http","$state","modalService","bookService",function(e,t,a,n){function r(){n.getBooks().then(function(e){i.books=e.data,console.log(i.books)},function(e){handleException(e)})}var i=this;i.books=[],i.selectedBookOptions=function(){i.booksForm.$valid&&n.selectedBook(i.selectedBook.ID).then(function(e){t.go("print.terms")},function(e){console.log(e),a.saveErrorModal(e)})},r()}])}(),function(){"use strict";angular.module("print.module").service("bookService",["$http",function(e){var t=this;t.getBooks=function(){return e.get("/api/Books/GetBooks/2017")},t.selectedBook=function(t){return e.put("api/books/"+t)}}])}(),function(){"use strict";angular.module("print.module").service("modalService",["toaster",function(e){var t=this;t.saveSuccessModal=function(){e.pop({type:"success",title:"Saved!",body:"Your answers have been stored.",toasterId:1})},t.pdfSuccessModal=function(){e.pop({type:"success",title:"Success!",body:"Your PDF has been generated in a new tab.",toasterId:1})},t.saveErrorModal=function(t){void 0===t&&(t="Please contact the administrator."),e.pop({type:"error",title:"Error!",toasterId:1,body:"There was an error saving your request. "+t})},t.successDeleteModal=function(){e.pop({type:"success",title:"Success!",toasterId:1,body:"The selected row has been deleted"})},t.noNewAnswersModal=function(){e.pop({type:"info",title:"No changes to Save!",body:"Please submit answers before saving.",toasterId:1})},t.incorrectSubmitModal=function(){e.pop({type:"info",title:"Warning!",toasterId:2,body:"Please input all fields correctly before submitting."})},t.confirmDeleteModal=function(){e.pop({type:"error",title:"Warning!",body:"Public/scripts/sharedServices/confirmDelete.html",toasterId:2,bodyOutputType:"template"})},t.loadingModal=function(){e.pop({type:"info",title:"Loading...",body:"Public/scripts/sharedServices/loadingModal.html",toasterId:3,bodyOutputType:"template"})},t.changesSaved=function(){e.pop({type:"success",title:"Success!",toasterId:1,body:"You changes have been saved!"})},t.noNewAnswersModal=function(){e.pop({type:"info",title:"No changes to Save!",toasterId:1,body:"Please submit answers before saving."})},t.noNewAnswersModal=function(){e.pop({type:"info",title:"No changes to Save!",toasterId:1,body:"Please submit answers before saving."})}}])}(),function(){"use strict";angular.module("print.module").controller("ratesReportCtrl",["$http","$scope","$rootScope","modalService","ratesReportService",function(e,t,a,n,r){var i=this;i.$scope=t,i.getRatesReportList=function(){r.getRatesRepData().then(function(e){i.records=e.data},function(e){handleException(e)})},i.getRatesReportList(),i.rateReportChanges=[],i.getValues=function(e,t){for(var a=0;a<i.rateReportChanges.length;a++)e.AdTypeID===i.rateReportChanges[a].AdTypeID&&e.RateTypeID===i.rateReportChanges[a].RateTypeID&&i.rateReportChanges.splice(a,1);i.rateReportChanges.push({RateTypeID:t,AdTypeID:e.AdTypeID,EditionTypeID:e.EditionTypeID,Answer:e.PublisherAgreement})},i.savePubAgreement=function(){return 0===Object.keys(i.rateReportChanges).length?n.noNewAnswersModal():void r.savePubAgreementData(i.rateReportChanges).then(function(e){n.saveSuccessModal(),i.rateReportChanges=[]},function(e){n.saveErrorModal(e.data.Message),console.log(e)})}}])}(),function(){"use strict";angular.module("print.module").service("ratesReportService",["$http",function(e){var t=this;t.getRatesRepData=function(){return e.get("api/RatesReport/GetRatesReport")},t.savePubAgreementData=function(t){return e.post("api/RatesReport/savePublisherAgreements/answers",t)}}])}(),function(){"use strict";angular.module("print.module").controller("termsCtrl",["$http","toaster","modalService","termsService",function(e,t,a,n){var r=this;r.termAnswers,r.getQuestionsList=function(){n.getTermsData().then(function(e){r.terms=e.data},function(e){a.saveErrorModal(e.data.Message)})},r.getQuestionsList(),r.getAnswersList=function(){n.getTermsAnswers().then(function(e){var t=e.data;r.termYesNoAns=[],r.termFreeFormAns=[];for(var a=0;a<Object.keys(t).length;a++)r.termYesNoAns[t[a].QuestionID]=t[a].AnswerYesNo,r.termFreeFormAns[t[a].QuestionID]=t[a].AnswerFreeForm},function(e){console.log("no answers")})},r.getAnswersList(),r.saveAnswers=function(){r.termYesNoAns||(r.termYesNoAns=[]),r.termFreeFormAns||(r.termFreeFormAns=[]),r.isTimingOut=!0;var e=Object.keys(r.termYesNoAns).concat(Object.keys(r.termFreeFormAns)),t=e.filter(function(e,t,a){return a.indexOf(e)===t});r.termAnswers=[];for(var i=0;i<t.length;i++)r.termAnswers.push({QuestionID:t[i],AnswerYesNo:r.termYesNoAns[t[i]],AnswerFreeForm:r.termFreeFormAns[t[i]]});n.saveTermsAnswers(r.termAnswers).then(function(e){r.answers=e.data,a.saveSuccessModal(),r.isTimingOut=!1},function(e){handleException(e),a.saveErrorModal(),r.isTimingOut=!1})}}])}(),function(){"use strict";angular.module("print.module").service("termsService",["$http",function(e){var t=this;t.getTermsData=function(){return e.get("/api/Terms")},t.getTermsAnswers=function(){return e.get("api/Terms/GetAnswers")},t.saveTermsAnswers=function(t){return e.post("/api/terms/saveAnswers/answers",t)}}])}();